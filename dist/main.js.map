{
  "version": 3,
  "sources": ["../main.ts", "../options.ts"],
  "sourcesContent": ["import { App, Plugin, PluginSettingTab, Setting, MarkdownView, Notice, TFile } from 'obsidian';\nimport { TextComposerSettings, DEFAULT_SETTINGS, TextComposerSettingTab } from './options';\n\nexport default class TextComposerPlugin extends Plugin {\n\tsettings: TextComposerSettings;\n\n\tasync onload() {\n\t\tawait this.loadSettings();\n\n\t\t// Add a command to compile the document\n\t\tthis.addCommand({\n\t\t\tid: 'compile-md-document',\n\t\t\tname: 'Compile MD Document',\n\t\t\tcallback: () => this.compileDocument(),\n\t\t\thotkeys: [{ modifiers: [\"Ctrl\", \"Shift\"], key: \"C\" }] // Default shortcut\n\t\t});\n\n\t\t// Add a settings tab\n\t\tthis.addSettingTab(new TextComposerSettingTab(this.app, this));\n\t}\n\n\tonunload() {}\n\n\tasync loadSettings() {\n\t\tthis.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());\n\t}\n\n\tasync saveSettings() {\n\t\tawait this.saveData(this.settings);\n\t}\n\n\tasync compileDocument() {\n\t\tconst activeView = this.app.workspace.getActiveViewOfType(MarkdownView);\n\t\tif (!activeView) {\n\t\t\tnew Notice('No active markdown view found');\n\t\t\treturn;\n\t\t}\n\n\t\tconst editor = activeView.editor;\n\t\tconst content = editor.getValue();\n\t\tconst compiledContent = await this.replaceLinks(content);\n\n\t\t// Get the current file and generate the new file name\n\t\tconst currentFile = activeView.file;\n\t\tif (currentFile) {\n\t\t\tconst newFileName = currentFile.basename + this.settings.appendName + '.md';\n\t\t\tconst newFilePath = this.settings.exportDirectory + '/' + newFileName;\n\n\t\t\t// Create a new file with the compiled content\n\t\t\tconst newFile = await this.app.vault.create(newFilePath, compiledContent);\n\n\t\t\t// Open the new file in a new tab\n\t\t\tconst leaf = this.app.workspace.splitActiveLeaf();\n\t\t\tawait leaf.openFile(newFile);\n\n\t\t\tnew Notice(`Compiled document created and opened: ${newFilePath}`);\n\t\t} else {\n\t\t\tnew Notice('No current file found');\n\t\t}\n\t}\n\n\tasync replaceLinks(content: string): Promise<string> {\n\t\tconst linkPattern = /!\\[\\[([^\\]]+)\\]\\]/g;\n\t\tlet match: RegExpExecArray | null;\n\t\tlet result = content;\n\n\t\twhile ((match = linkPattern.exec(content)) !== null) {\n\t\t\tconst linkedFile = match[1];\n\t\t\tconst linkedFilePath = this.app.metadataCache.getFirstLinkpathDest(linkedFile, \"\");\n\t\t\tif (linkedFilePath) {\n\t\t\t\tconst fileContent = await this.app.vault.read(linkedFilePath);\n\t\t\t\tconst compiledContent = await this.replaceLinks(fileContent); // Recursive replacement\n\t\t\t\tresult = result.replace(match[0], compiledContent);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n", "import { App, PluginSettingTab, Setting } from 'obsidian';\nimport TextComposerPlugin from './main';\n\nexport interface TextComposerSettings {\n\texportDirectory: string;\n\tappendName: string;\n\tshortcut: string;\n}\n\nexport const DEFAULT_SETTINGS: TextComposerSettings = {\n\texportDirectory: '/',\n\tappendName: '_compiled',\n\tshortcut: 'Ctrl+Shift+C',\n}\n\nexport class TextComposerSettingTab extends PluginSettingTab {\n\tplugin: TextComposerPlugin;\n\n\tconstructor(app: App, plugin: TextComposerPlugin) {\n\t\tsuper(app, plugin);\n\t\tthis.plugin = plugin;\n\t}\n\n\tdisplay(): void {\n\t\tconst { containerEl } = this;\n\t\tcontainerEl.empty();\n\n\t\tcontainerEl.createEl('h2', { text: 'Text Composer Settings' });\n\n\t\tnew Setting(containerEl)\n\t\t\t.setName('Export Directory')\n\t\t\t.setDesc('Set the directory where the compiled file will be exported')\n\t\t\t.addText(text => text\n\t\t\t\t.setPlaceholder('Enter export directory')\n\t\t\t\t.setValue(this.plugin.settings.exportDirectory)\n\t\t\t\t.onChange(async (value) => {\n\t\t\t\t\tthis.plugin.settings.exportDirectory = value;\n\t\t\t\t\tawait this.plugin.saveSettings();\n\t\t\t\t}));\n\n\t\tnew Setting(containerEl)\n\t\t\t.setName('Append Name')\n\t\t\t.setDesc('Set the name to append to the compiled file')\n\t\t\t.addText(text => text\n\t\t\t\t.setPlaceholder('Enter append name')\n\t\t\t\t.setValue(this.plugin.settings.appendName)\n\t\t\t\t.onChange(async (value) => {\n\t\t\t\t\tthis.plugin.settings.appendName = value;\n\t\t\t\t\tawait this.plugin.saveSettings();\n\t\t\t\t}));\n\n\t\tnew Setting(containerEl)\n\t\t\t.setName('Shortcut')\n\t\t\t.setDesc('Set the shortcut to run the plugin')\n\t\t\t.addText(text => text\n\t\t\t\t.setPlaceholder('Enter shortcut')\n\t\t\t\t.setValue(this.plugin.settings.shortcut)\n\t\t\t\t.onChange(async (value) => {\n\t\t\t\t\tthis.plugin.settings.shortcut = value;\n\t\t\t\t\tawait this.plugin.saveSettings();\n\t\t\t\t}));\n\t}\n}\n"],
  "mappings": "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",
  "names": ["import_obsidian"]
}
